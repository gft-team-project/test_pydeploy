 //Creating AWS ECR registry terraform
pipeline {
 environment {
  AWS_ACCESS_KEY_ID= credentials('AWS_ACCESS_KEY_ID')
  AWS_SECRET_ACCESS_KEY= credentials('AWS_SECRET_ACCESS_KEY')
 
 }
 agent any
 stages {
 stage('TF Plan') {
       steps {
         script {
           //cd ecr-create
           sh 'cd ecr-create && terraform init'
          sh 'cd ecr-create && terraform plan'
         }
       }
     }

stage('TF Apply') {
      steps {
        script {
          sh 'cd ecr-create && terraform apply --auto-approve'
         
        }
      }
    }
  }
